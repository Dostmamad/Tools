<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Free Online Image Compressor** â€“ Reduce JPG, PNG & WebP file size without losing quality! Optimize photos for websites, social media & emails. Fast, secure & mobile-friendly. Try the best image compressor tool now">
    <meta name="keywords" content="image compressor, reduce image size, optimize images, jpg compressor, png compressor, webp converter, Compress image, Photo size reducer, Online image optimizer, Free image compressor, Compress image for website, Best online image compressor, High-quality image compressor, Free online image compressor tool, Compress images for free, Resize and compress images">
    <meta name="author" content="Image Compressor Pro">
    <meta name="robots" content="index, follow">
    <title>Image Compressor Pro | Reduce Image Size Online for Free</title>
    <link rel="canonical" href="https://yourdomain.com/image-compressor" />
    
    <!-- Open Graph / Social Media Meta Tags -->
    <meta property="og:title" content="Image Compressor Pro | Reduce Image Size Online for Free">
    <meta property="og:description" content="Free online tool to compress your images while maintaining quality. Reduce file size for JPG, PNG, and WebP images.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://yourdomain.com/image-compressor">
    <meta property="og:image" content="https://yourdomain.com/images/compressor-preview.jpg">
    
    <!-- Favicon -->
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #4361ee;
            --secondary-color: #3f37c9;
            --accent-color: #4cc9f0;
            --light-color: #f8f9fa;
            --dark-color: #212529;
            --success-color: #4bb543;
            --warning-color: #f0ad4e;
            --error-color: #d9534f;
            --border-radius: 8px;
            --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            line-height: 1.6;
            color: var(--dark-color);
            background-color: #f5f7ff;
            padding: 0;
            margin: 0;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        header {
            background-color: white;
            box-shadow: var(--box-shadow);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary-color);
            text-decoration: none;
            display: flex;
            align-items: center;
        }
        
        .logo i {
            margin-right: 10px;
            font-size: 28px;
        }
        
        nav ul {
            display: flex;
            list-style: none;
        }
        
        nav ul li {
            margin-left: 20px;
        }
        
        nav ul li a {
            text-decoration: none;
            color: var(--dark-color);
            font-weight: 500;
            transition: var(--transition);
        }
        
        nav ul li a:hover {
            color: var(--primary-color);
        }
        
        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--dark-color);
        }
        
        main {
            padding: 40px 0;
        }
        
        .hero {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: var(--primary-color);
        }
        
        .hero p {
            font-size: 1.1rem;
            color: #555;
            max-width: 700px;
            margin: 0 auto 25px;
        }
        
        .ad-banner {
            background-color: #f0f2f5;
            padding: 15px;
            border-radius: var(--border-radius);
            margin: 30px auto;
            text-align: center;
            max-width: 100%;
            overflow: hidden;
        }
        
        .compressor-container {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 30px;
            margin-bottom: 40px;
        }
        
        .upload-area {
            border: 2px dashed #ccc;
            border-radius: var(--border-radius);
            padding: 40px 20px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            margin-bottom: 30px;
            position: relative;
        }
        
        .upload-area:hover {
            border-color: var(--primary-color);
            background-color: rgba(67, 97, 238, 0.05);
        }
        
        .upload-area i {
            font-size: 48px;
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .upload-area h3 {
            margin-bottom: 10px;
            color: var(--dark-color);
        }
        
        .upload-area p {
            color: #666;
            margin-bottom: 15px;
        }
        
        .btn {
            display: inline-block;
            background-color: var(--primary-color);
            color: white;
            padding: 12px 24px;
            border-radius: var(--border-radius);
            text-decoration: none;
            font-weight: 500;
            border: none;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .btn:hover {
            background-color: var(--secondary-color);
            transform: translateY(-2px);
        }
        
        .btn-outline {
            background-color: transparent;
            border: 2px solid var(--primary-color);
            color: var(--primary-color);
        }
        
        .btn-outline:hover {
            background-color: var(--primary-color);
            color: white;
        }
        
        #file-input {
            display: none;
        }
        
        .settings-panel {
            margin-bottom: 30px;
        }
        
        .settings-panel h3 {
            margin-bottom: 15px;
            color: var(--dark-color);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .slider-container {
            display: flex;
            align-items: center;
        }
        
        .slider-container input[type="range"] {
            flex: 1;
            margin-right: 15px;
            -webkit-appearance: none;
            height: 8px;
            border-radius: 4px;
            background: #ddd;
            outline: none;
        }
        
        .slider-container input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary-color);
            cursor: pointer;
        }
        
        .slider-value {
            width: 50px;
            text-align: center;
            font-weight: 500;
        }
        
        .radio-group {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }
        
        .radio-option {
            display: flex;
            align-items: center;
        }
        
        .radio-option input {
            margin-right: 8px;
        }
        
        .results {
            display: none;
            margin-top: 30px;
        }
        
        .results h3 {
            margin-bottom: 20px;
            color: var(--dark-color);
        }
        
        .comparison {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .image-box {
            flex: 1;
            min-width: 250px;
            text-align: center;
        }
        
        .image-box img {
            max-width: 100%;
            height: auto;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            margin-bottom: 10px;
        }
        
        .image-info {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: var(--border-radius);
        }
        
        .download-btn {
            display: block;
            width: 100%;
            margin-top: 15px;
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            flex: 1;
            min-width: 150px;
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: var(--border-radius);
            text-align: center;
        }
        
        .stat-card h4 {
            color: #666;
            margin-bottom: 10px;
            font-size: 14px;
        }
        
        .stat-card p {
            font-size: 18px;
            font-weight: 600;
            color: var(--dark-color);
        }
        
        .savings {
            color: var(--success-color) !important;
        }
        
        .loading {
            display: none;
            text-align: center;
            margin: 30px 0;
        }
        
        .spinner {
            width: 40px;
            height: 40px;
            margin: 0 auto 15px;
            border: 4px solid rgba(67, 97, 238, 0.2);
            border-radius: 50%;
            border-top-color: var(--primary-color);
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 50px 0;
        }
        
        .feature-card {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 30px;
            transition: var(--transition);
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
        }
        
        .feature-card i {
            font-size: 36px;
            color: var(--primary-color);
            margin-bottom: 20px;
        }
        
        .feature-card h3 {
            margin-bottom: 15px;
            color: var(--dark-color);
        }
        
        .feature-card p {
            color: #666;
        }
        
        footer {
            background-color: var(--dark-color);
            color: white;
            padding: 40px 0 20px;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .footer-column h3 {
            color: white;
            margin-bottom: 20px;
            font-size: 18px;
        }
        
        .footer-column ul {
            list-style: none;
        }
        
        .footer-column ul li {
            margin-bottom: 10px;
        }
        
        .footer-column ul li a {
            color: #bbb;
            text-decoration: none;
            transition: var(--transition);
        }
        
        .footer-column ul li a:hover {
            color: white;
        }
        
        .copyright {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid #444;
            color: #bbb;
            font-size: 14px;
        }
        
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                text-align: center;
            }
            
            nav ul {
                margin-top: 15px;
                justify-content: center;
            }
            
            nav ul li {
                margin: 0 10px;
            }
            
            .hero h1 {
                font-size: 2rem;
            }
            
            .comparison {
                flex-direction: column;
            }
            
            .radio-group {
                flex-direction: column;
                gap: 10px;
            }
            
            .mobile-menu-btn {
                display: block;
                position: absolute;
                top: 15px;
                right: 20px;
            }
            
            nav {
                display: none;
                width: 100%;
                margin-top: 15px;
            }
            
            nav.active {
                display: block;
            }
            
            nav ul {
                flex-direction: column;
            }
            
            nav ul li {
                margin: 5px 0;
            }
        }
        
        /* Tooltip styles */
        .tooltip {
            position: relative;
            display: inline-block;
            margin-left: 5px;
            cursor: pointer;
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: #555;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 12px;
            font-weight: normal;
        }
        
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
    </style>
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <header>
        <div class="container header-content">
            <a href="#" class="logo">
                <i class="fas fa-compress-alt"></i>
                ImageCompressorPro
            </a>
            <button class="mobile-menu-btn" id="mobile-menu-btn">
                <i class="fas fa-bars"></i>
            </button>
            <nav id="main-nav">
                <ul>
                    <li><a href="/Tools/index.html">Home</a></li>
                    <li><a href="#">How It Works</a></li>
                    <li><a href="#">Features</a></li>
                    <li><a href="#">FAQ</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>
    
    <main>
        <div class="container">
            <section class="hero">
                <h1>Compress Images Online for Free</h1>
                <p>Reduce image file size without losing quality. Supports JPG, PNG, and WebP formats. Perfect for websites, social media, and email.</p>
            </section>
            
            <!-- Ad Banner Top -->
            <div class="ad-banner">
                <!-- Replace with your Google AdSense code -->
                <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-app-pub-2654116142451925"
                crossorigin="anonymous"></script>
                <!-- ImageCompressor_Top -->
                <ins class="adsbygoogle"
                    style="display:block"
                    data-ad-client="ca-app-pub-2654116142451925"
                    data-ad-slot="8259272508"
                    data-ad-format="auto"
                    data-full-width-responsive="true"></ins>
                <script>
                    (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
            </div>
            
            <section class="compressor-container">
                <div class="upload-area" id="upload-area">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <h3>Drag & Drop Your Images Here</h3>
                    <p>or click to browse files</p>
                    <button class="btn">Select Images</button>
                    <input type="file" id="file-input" accept="image/*" multiple>
                </div>
                
                <div class="settings-panel">
                    <h3>Compression Settings</h3>
                    
                    <div class="form-group">
                        <label for="quality">
                            Compression Level 
                            <span class="tooltip">
                                <i class="fas fa-info-circle"></i>
                                <span class="tooltiptext">Higher values mean better quality but larger file size</span>
                            </span>
                        </label>
                        <div class="slider-container">
                            <input type="range" id="quality" min="10" max="90" value="70" step="5">
                            <span class="slider-value" id="quality-value">70%</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Output Format</label>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="format" value="original" checked> Original
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="format" value="jpg"> JPG
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="format" value="png"> PNG
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="format" value="webp"> WebP
                            </label>
                        </div>
                    </div>
                    
                    <button class="btn" id="compress-btn" disabled>Compress Images</button>
                </div>
                
                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p>Compressing your images...</p>
                </div>
                
                <div class="results" id="results">
                    <h3>Compression Results</h3>
                    
                    <div class="stats">
                        <div class="stat-card">
                            <h4>Original Size</h4>
                            <p id="original-size">0 KB</p>
                        </div>
                        <div class="stat-card">
                            <h4>Compressed Size</h4>
                            <p id="compressed-size">0 KB</p>
                        </div>
                        <div class="stat-card">
                            <h4>Savings</h4>
                            <p id="savings-percent" class="savings">0%</p>
                        </div>
                    </div>
                    
                    <div class="comparison">
                        <div class="image-box">
                            <h4>Original Image</h4>
                            <img id="original-img" src="" alt="Original Image">
                            <div class="image-info">
                                <p id="original-info">Size: 0 KB</p>
                            </div>
                        </div>
                        <div class="image-box">
                            <h4>Compressed Image</h4>
                            <img id="compressed-img" src="" alt="Compressed Image">
                            <div class="image-info">
                                <p id="compressed-info">Size: 0 KB</p>
                                <button class="btn download-btn" id="download-btn">
                                    <i class="fas fa-download"></i> Download
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Ad Banner Middle -->
            <div class="ad-banner">
                <!-- Replace with your Google AdSense code -->
                <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-app-pub-2654116142451925"
                crossorigin="anonymous"></script>
                <!-- ImageCompressor_Middle -->
                <ins class="adsbygoogle"
                    style="display:block"
                    data-ad-client="ca-app-pub-2654116142451925"
                    data-ad-slot="9578973470"
                    data-ad-format="auto"
                    data-full-width-responsive="true"></ins>
                <script>
                    (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
            </div>
            
            <section class="features">
                <div class="feature-card">
                    <i class="fas fa-tachometer-alt"></i>
                    <h3>Fast Processing</h3>
                    <p>Our tool compresses images in seconds using advanced algorithms, saving you time and bandwidth.</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-lock"></i>
                    <h3>Secure & Private</h3>
                    <p>All image processing happens in your browser. Your files never leave your computer.</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-mobile-alt"></i>
                    <h3>Mobile Friendly</h3>
                    <p>Works perfectly on all devices - smartphones, tablets, and desktop computers.</p>
                </div>
            </section>
            
            <!-- Ad Banner Bottom -->
            <div class="ad-banner">
                <!-- Replace with your Google AdSense code -->
                <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-app-pub-2654116142451925"
                crossorigin="anonymous"></script>
                <!-- ImageCompressor_Bottom -->
                <ins class="adsbygoogle"
                    style="display:block"
                    data-ad-client="ca-app-pub-2654116142451925"
                    data-ad-slot="2666914919"
                    data-ad-format="auto"
                    data-full-width-responsive="true"></ins>
                <script>
                    (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
            </div>
        </div>
    </main>
    
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>ImageCompressorPro</h3>
                    <p>The fastest and most secure way to compress your images online for free.</p>
                </div>
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="/Tools/index.html">Home</a></li>
                        <li><a href="#">How It Works</a></li>
                        <li><a href="#">Features</a></li>
                        <li><a href="#">FAQ</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Support</h3>
                    <ul>
                        <li><a href="#">Contact Us</a></li>
                        <li><a href="#">Privacy Policy</a></li>
                        <li><a href="#">Terms of Service</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Connect</h3>
                    <ul>
                        <li><a href="#"><i class="fab fa-twitter"></i> Twitter</a></li>
                        <li><a href="#"><i class="fab fa-facebook"></i> Facebook</a></li>
                        <li><a href="#"><i class="fab fa-instagram"></i> Instagram</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2023 ImageCompressorPro. All rights reserved.</p>
            </div>
        </div>
    </footer>
    
    <script>
        // Mobile menu toggle
        document.getElementById('mobile-menu-btn').addEventListener('click', function() {
            document.getElementById('main-nav').classList.toggle('active');
        });
        
        // Quality slider update
        const qualitySlider = document.getElementById('quality');
        const qualityValue = document.getElementById('quality-value');
        
        qualitySlider.addEventListener('input', function() {
            qualityValue.textContent = this.value + '%';
        });
        
        // File upload handling
        const uploadArea = document.getElementById('upload-area');
        const fileInput = document.getElementById('file-input');
        const compressBtn = document.getElementById('compress-btn');
        let selectedFiles = [];
        
        uploadArea.addEventListener('click', function() {
            fileInput.click();
        });
        
        uploadArea.addEventListener('dragover', function(e) {
            e.preventDefault();
            this.style.borderColor = 'var(--primary-color)';
            this.style.backgroundColor = 'rgba(67, 97, 238, 0.1)';
        });
        
        uploadArea.addEventListener('dragleave', function() {
            this.style.borderColor = '#ccc';
            this.style.backgroundColor = 'transparent';
        });
        
        uploadArea.addEventListener('drop', function(e) {
            e.preventDefault();
            this.style.borderColor = '#ccc';
            this.style.backgroundColor = 'transparent';
            
            if (e.dataTransfer.files.length) {
                handleFiles(e.dataTransfer.files);
            }
        });
        
        fileInput.addEventListener('change', function() {
            if (this.files.length) {
                handleFiles(this.files);
            }
        });
        
        function handleFiles(files) {
            selectedFiles = Array.from(files).filter(file => 
                file.type.match('image.*')
            );
            
            if (selectedFiles.length) {
                compressBtn.disabled = false;
                uploadArea.innerHTML = `
                    <i class="fas fa-check-circle" style="color: var(--success-color)"></i>
                    <h3>${selectedFiles.length} ${selectedFiles.length === 1 ? 'file' : 'files'} selected</h3>
                    <p>Ready to compress</p>
                    <button class="btn btn-outline">Change Files</button>
                `;
                
                // Add click event to the new button
                uploadArea.querySelector('button').addEventListener('click', function(e) {
                    e.stopPropagation();
                    fileInput.click();
                });
                
                // Preview the first image
                if (selectedFiles.length === 1) {
                    previewImage(selectedFiles[0]);
                }
            } else {
                alert('Please select only image files (JPG, PNG, WebP).');
            }
        }
        
        function previewImage(file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('original-img').src = e.target.result;
                document.getElementById('original-info').textContent = `Size: ${formatFileSize(file.size)}`;
                document.getElementById('original-size').textContent = formatFileSize(file.size);
            };
            reader.readAsDataURL(file);
        }
        
        // Compression function
        compressBtn.addEventListener('click', async function() {
            if (!selectedFiles.length) return;
            
            const quality = parseInt(qualitySlider.value) / 100;
            const format = document.querySelector('input[name="format"]:checked').value;
            
            // Show loading
            document.getElementById('loading').style.display = 'block';
            document.getElementById('results').style.display = 'none';
            
            try {
                // Process first file (you can extend this to handle multiple files)
                const file = selectedFiles[0];
                const result = await compressImage(file, quality, format);
                displayResults(file, result);
            } catch (error) {
                console.error('Compression error:', error);
                alert('An error occurred during compression. Please try again.');
                document.getElementById('loading').style.display = 'none';
            }
        });
        
        async function compressImage(file, quality, format) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                
                reader.onload = function(event) {
                    const img = new Image();
                    
                    img.onload = function() {
                        try {
                            const canvas = document.createElement('canvas');
                            const ctx = canvas.getContext('2d');
                            
                            // Calculate new dimensions if needed
                            canvas.width = img.width;
                            canvas.height = img.height;
                            
                            // Draw image on canvas
                            ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                            
                            // Get the original size
                            const originalSize = file.size;
                            
                            // Determine output format
                            let mimeType;
                            switch(format) {
                                case 'jpg':
                                    mimeType = 'image/jpeg';
                                    break;
                                case 'png':
                                    mimeType = 'image/png';
                                    break;
                                case 'webp':
                                    mimeType = 'image/webp';
                                    break;
                                default:
                                    mimeType = file.type;
                            }
                            
                            // Quality adjustment for different formats
                            let qualitySetting = quality;
                            if (mimeType === 'image/png') {
                                // PNG doesn't support quality, so we reduce colors instead
                                qualitySetting = Math.max(0.1, quality * 0.7);
                            }
                            
                            // Convert to data URL with specified quality/format
                            canvas.toBlob((blob) => {
                                const compressedUrl = URL.createObjectURL(blob);
                                resolve({
                                    originalSize,
                                    compressedSize: blob.size,
                                    compressedDataUrl: compressedUrl,
                                    mimeType
                                });
                            }, mimeType, qualitySetting);
                            
                        } catch (error) {
                            reject(error);
                        }
                    };
                    
                    img.onerror = function() {
                        reject(new Error('Failed to load image'));
                    };
                    
                    img.src = event.target.result;
                };
                
                reader.onerror = function() {
                    reject(new Error('Failed to read file'));
                };
                
                reader.readAsDataURL(file);
            });
        }
        
        function displayResults(originalFile, result) {
            // Hide loading
            document.getElementById('loading').style.display = 'none';
            
            // Update stats
            document.getElementById('original-size').textContent = formatFileSize(result.originalSize);
            document.getElementById('compressed-size').textContent = formatFileSize(result.compressedSize);
            
            const savings = ((result.originalSize - result.compressedSize) / result.originalSize * 100).toFixed(1);
            document.getElementById('savings-percent').textContent = savings + '%';
            
            // Update image info
            document.getElementById('original-info').textContent = `Size: ${formatFileSize(result.originalSize)}`;
            document.getElementById('compressed-info').textContent = `Size: ${formatFileSize(result.compressedSize)}`;
            
            // Set compressed image
            document.getElementById('compressed-img').src = result.compressedDataUrl;
            
            // Set download button
            const downloadBtn = document.getElementById('download-btn');
            downloadBtn.onclick = function() {
                downloadImage(result.compressedDataUrl, originalFile.name, result.mimeType);
            };
            
            // Show results
            document.getElementById('results').style.display = 'block';
            
            // Scroll to results
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        }
        
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }
        
        function downloadImage(dataUrl, originalName, mimeType) {
            const extension = mimeType.split('/')[1] || 'jpg';
            const fileName = originalName.replace(/\.[^/.]+$/, '') + '-compressed.' + extension;
            
            const link = document.createElement('a');
            link.href = dataUrl;
            link.download = fileName;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            // Clean up the object URL
            setTimeout(() => {
                URL.revokeObjectURL(dataUrl);
            }, 100);
        }
    </script>
</body>
</html>
